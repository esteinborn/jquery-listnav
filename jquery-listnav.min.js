/*! jQuery ListNav - v2.5 - 2015-07
Copyright Eric Steinborn - https://github.com/esteinborn/jquery-listnav */
!function(e){e.fn.listnav=function(t){var i=e.extend({},e.fn.listnav.defaults,t),l=["_","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","-"],s=!1,n=null!==document.ontouchstart?"click":"touchend";return i.prefixes=e.map(i.prefixes,function(e){return e.toLowerCase()}),this.each(function(){function t(){if(f.append(v()),C=e(".ln-letters",f).slice(0,1),i.showCounts&&(m=e(".ln-letter-count",f).slice(0,1)),o(),c(),h(),i.flagDisabled&&d(),i.includeAll||e(".all",C).remove(),i.includeNums||e("._",C).remove(),i.includeOther||e(".-",C).remove(),i.removeDisabled&&e(".ln-disabled",C).remove(),e(":last",C).addClass("ln-last"),e.cookie&&null!==i.cookieName){var t=e.cookie(i.cookieName);null!==t&&"undefined"!=typeof t&&(i.initLetter=t)}if(window.location.hash&&e.inArray(window.location.hash.substring(1),l)&&(i.initLetter=window.location.hash.substring(1),e(window).on("popstate",function(){i.initLetter=window.location.hash.substring(1),e("."+i.initLetter.toLowerCase(),C).slice(0,1).trigger(n)})),""!==i.initLetter)s=!0,e("."+i.initLetter.toLowerCase(),C).slice(0,1).trigger(n);else if(i.includeAll)e(".all",C).addClass("ln-selected");else for(var a=i.includeNums?0:1;a<l.length;a++)if(k[l[a]]>0){s=!0,e("."+l[a],C).slice(0,1).trigger(n);break}}function a(){var t=m.outerHeight();m.css({top:e("a:first",f).slice(0,1).position().top-t})}function o(){var t,l,s="",n=i.prefixes.length>0,a=i.filterSelector.length>0;e(x).children().each(function(){if(l=e(this),t=a?e.trim(l.find(i.filterSelector).text()).toLowerCase():e.trim(l.text()).toLowerCase(),""!==t){if(n){var o=e.map(i.prefixes,function(e){return e.indexOf(" ")<=0?e+" ":e}),d=e.grep(o,function(e){return 0===t.indexOf(e)});if(d.length>0){var c=t.toLowerCase().split(d[0])[1];return s=null!=c?e.trim(c).charAt(0):t.charAt(0),void r(s,l,!0)}}s=t.charAt(0),r(s,l)}})}function r(e,t,i){/\W/.test(e)&&(e="-"),isNaN(e)||(e="_"),t.addClass("ln-"+e),void 0===k[e]&&(k[e]=0),k[e]++,i||b++}function d(){for(var t=0;t<l.length;t++)void 0===k[l[t]]&&e("."+l[t],C).addClass("ln-disabled")}function c(){x.append('<li class="ln-no-match listNavHide">'+i.noMatchText+"</li>")}function u(t){return e(t).hasClass("all")?L=i.dontCount?b-x.find(i.dontCount).length:b:(t=".ln-"+e(t).attr("class").split(" ")[0],N=i.dontCount?x.find(t).not(i.dontCount).length:x.find(t).length,void 0!==N?N:0)}function h(){i.showCounts&&(f.mouseover(function(){a()}),e(".ln-letters a",f).mouseover(function(){w=e(this).position().left,p=e(this).outerWidth()+"px",N=u(this),m.css({left:w,width:p}).text(N).addClass("letterCountShow").removeClass("listNavHide")}).mouseout(function(){m.addClass("listNavHide").removeClass("letterCountShow")})),e("a",C).bind(n,function(t){t.preventDefault();var l=e(this),n=l.attr("class").split(" ")[0],a=x.children(".ln-no-match");if(t.isTrigger||(window.location.hash="#"+n),S!==n){if(e("a.ln-selected",C).removeClass("ln-selected"),"all"===n)x.children().addClass("listNavShow").removeClass("listNavHide"),a.addClass("listNavHide").removeClass("listNavShow"),H=!0;else{H?(x.children().addClass("listNavHide").removeClass("listNavShow"),H=!1):""!==S&&x.children(".ln-"+S).addClass("listNavHide").removeClass("listNavShow");var o=u(this);o>0?(x.children(".ln-"+n).addClass("listNavShow").removeClass("listNavHide"),a.addClass("listNavHide").removeClass("listNavShow")):a.addClass("listNavShow").removeClass("listNavHide")}S=n,e.cookie&&null!==i.cookieName&&e.cookie(i.cookieName,n,{expires:999}),l.addClass("ln-selected"),l.blur(),s||null===i.onClick?s=!1:i.onClick(n)}})}function v(){for(var e=[],t=1;t<l.length;t++)0===e.length&&e.push('<a class="all" href="#">'+i.allText+'</a><a class="_" href="#">0-9</a>'),e.push('<a class="'+l[t]+'" href="#'+l[t]+'">'+("-"===l[t]?"...":l[t].toUpperCase())+"</a>");return'<div class="ln-letters">'+e.join("")+"</div>"+(i.showCounts?'<div class="ln-letter-count listNavHide">0</div>':"")}var f,C,m,w,p,N,g=this.id,x=e(this),k={},b=0,L=0,H=!0,S="";e("#"+g+"-nav").length||e('<div id="'+g+'-nav" class="listNav"/>').insertBefore(x),f=e("#"+g+"-nav"),t()})},e.fn.listnav.defaults={initLetter:"",includeAll:!0,allText:"All",includeOther:!1,includeNums:!0,flagDisabled:!0,removeDisabled:!1,noMatchText:"No matching entries",showCounts:!0,dontCount:"",cookieName:null,onClick:null,prefixes:[],filterSelector:""}}(jQuery);